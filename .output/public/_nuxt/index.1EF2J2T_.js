import{N as o,O as n,a3 as F,a as D,u as e,P as S,V as f,_ as a,$ as L,a4 as k,J as _,a5 as G,Z as t,ab as O,a8 as C,I as b,a7 as $,as as j,j as q,G as W,w as Z,a2 as U}from"./swiper-vue.VD2cd0Tn.js";import{_ as N}from"./TheButton.vue.dnePxaYL.js";import{_ as V}from"./TheInput.vue.yvGVSlwe.js";import{_ as z}from"./TheModal.vue.D5WExyNl.js";import{_ as E}from"./TheTextContent.vue.4zzZJEtM.js";import{_ as A}from"./_plugin-vue_export-helper.x3n3nnut.js";import{u as M,a as I}from"./auth._46xZgze.js";import{u as J}from"./companies.QJKpwvsD.js";import{o as R}from"./vue-datepicker.g4gMPooH.js";import{_ as H}from"./nuxt-link.ft5LyyVp.js";import{C as K}from"./entry.mbXDUFAE.js";import{_ as Q}from"./TheFilter.vue.wwoAEfG9.js";import{_ as X}from"./TheSearch.vue.Mxwb5Qn7.js";import{u as Y}from"./index.3ZLbimt4.js";import"./index.aX4wazua.js";const ee={},te={class:"flex max-lg:flex-wrap justify-center gap-x-10 my-10 mx-auto w-full"};function se(c,i){return o(),n("div",te,[F(c.$slots,"default")])}const y=A(ee,[["render",se]]),le={class:"w-6/12 max-lg:w-full"},oe={class:"w-6/12 max-lg:w-full"},ae={class:"w-6/12 max-lg:w-full"},re={class:"w-6/12 max-lg:w-full"},ne={class:"w-6/12 max-lg:w-full flex flex-col"},ie={class:"text-md dark:text-white tracking-wider"},de={class:"w-6/12 flex flex-col max-lg:w-full gap-y-1"},ue={class:"text-md dark:text-white tracking-wider"},me={class:"w-6/12 flex flex-col max-lg:w-full"},ce={class:"text-md dark:text-white tracking-wider"},_e={class:"cursor-pointer hover:bg-semiCyan rounded-lg border-dashed border p-4 transition-all mt-2"},pe={class:"w-6/12 flex flex-col max-lg:w-full gap-y-2"},fe={class:"text-md dark:text-white tracking-wider"},xe={key:0,class:"tracking-widest dark:text-white"},we=["value"],ge={class:"w-6/12 max-lg:w-full"},ke={class:"text-md dark:text-white tracking-wider"},ye=["modelValue"],he=["value"],be={class:"w-full"},$e={key:0,class:"text-md dark:text-white tracking-widest mb-2"},ve={key:1,class:"text-md dark:text-white tracking-widest mb-2"},Ce=["value"],Ue={key:3},Ve={class:"text-md dark:text-white tracking-widest mb-2"},Le={key:0,class:"w-full"},je={class:"text-md dark:text-white tracking-widest mb-2"},Ne=["value"],Se={__name:"UserCreate",props:{showCreateUser:{type:Boolean,default:!1}},setup(c){const i=M(),d=J(),l=I(),r=D({email:"",first_name:"",last_name:"",password:"",phone:"",photo_file:"",position_id:"",date_of_birth:"",company_id:0,department_id:0,role_id:0,permissions:{}});function w(){l.loadPositionList(),l.loadUserList(),l.loadPositionList(),d.loadDepartmentList(),l.loadRoleList()}return(u,s)=>(o(),n("div",null,[e(i).current_user.permissions?(o(),S(N,{key:0,class:"max-md:w-full w-full px-4 text-sm",type:"signIn",onClick:s[0]||(s[0]=m=>{c.showCreateUser=!0,w(),e(i).user.role_en==="admin"&&e(d).loadCompanyList({page:1,limit:1e3,query:""})})},{default:f(()=>[L(a(u.$t("Создать пользователя")),1)]),_:1})):k("",!0),c.showCreateUser?(o(),S(z,{key:1,onShowModal:s[16]||(s[16]=m=>{c.showCreateUser=!c.showCreateUser,c.showCreateUser?r.value={}:r.value={}}),"show-create-user":c.showCreateUser},{default:f(()=>[_(E,null,{default:f(()=>[L(a(u.$t("Создание пользователя")),1)]),_:1}),t("form",{enctype:"multipart/form-data",onSubmit:s[15]||(s[15]=G(m=>e(l).createUser(e(r)),["prevent"]))},[_(y,null,{default:f(()=>[t("div",le,[_(V,{type:"text",label:u.$t("Имя"),modelValue:e(r).first_name,"onUpdate:modelValue":s[1]||(s[1]=m=>e(r).first_name=m)},null,8,["label","modelValue"])]),t("div",oe,[_(V,{type:"text",label:u.$t("Фамилия"),modelValue:e(r).last_name,"onUpdate:modelValue":s[2]||(s[2]=m=>e(r).last_name=m)},null,8,["label","modelValue"])])]),_:1}),_(y,null,{default:f(()=>[t("div",ae,[_(V,{type:"text",label:"Email",modelValue:e(r).email,"onUpdate:modelValue":s[3]||(s[3]=m=>e(r).email=m)},null,8,["modelValue"])]),t("div",re,[_(V,{type:"password",label:u.$t("Пароль"),modelValue:e(r).password,"onUpdate:modelValue":s[4]||(s[4]=m=>e(r).password=m)},null,8,["label","modelValue"])])]),_:1}),_(y,null,{default:f(()=>[t("div",ne,[t("p",ie,a(u.$t("Дата рождения")),1),_(e(R),{modelValue:e(r).date_of_birth,"onUpdate:modelValue":s[5]||(s[5]=m=>e(r).date_of_birth=m),"select-text":u.$t("Выбрать"),"cancel-text":u.$t("Отменить"),placeholder:"Start Typing ...","text-input":"",class:"w-full max-lg:hidden rounded-lg p-2 dark:border-none mx-auto outline-semiCyan outline-1","auto-apply":"","multi-calendars-solo":""},null,8,["modelValue","select-text","cancel-text"]),C(t("input",{type:"date","onUpdate:modelValue":s[6]||(s[6]=m=>e(r).date_of_birth=m),class:"max-lg:block border outline-semiCyan dark:outline-none outline-1 dark:border-none hidden p-4 dark:bg-gray-300 dark:text-black mb-4 rounded-lg"},null,512),[[O,e(r).date_of_birth]])]),t("div",de,[t("p",ue,a(u.$t("Номер телефона")),1),_(V,{type:"tel",class:"w-full rounded-lg p-2 outline-1",id:"phone",placeholder:"+998 (__) ___-__-__",modelValue:e(r).phone,"onUpdate:modelValue":s[7]||(s[7]=m=>e(r).phone=m)},null,8,["modelValue"])])]),_:1}),_(y,null,{default:f(()=>[t("div",me,[t("p",ce,a(u.$t("Фото")),1),t("label",_e,[t("input",{type:"file",name:"file",label:"Фото",class:"dark:text-white cursor-pointer",onInput:s[8]||(s[8]=m=>e(r).photo_file=m.target.files[0])},null,32)])])]),_:1}),_(y,null,{default:f(()=>{var m;return[t("div",pe,[t("p",fe,a(u.$t("Роль")),1),t("div",null,[e(i).user.role_en==="admin"?(o(),n("p",xe,a(u.$t("Администратор компании")),1)):C((o(),n("select",{key:1,onClick:s[9]||(s[9]=p=>console.log(e(l).get_role_list)),type:"text","onUpdate:modelValue":s[10]||(s[10]=p=>e(r).role_id=p),class:"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black",required:""},[(o(!0),n(b,null,$(e(l).get_role_list,(p,h)=>(o(),n("option",{value:p.id},a(p.name),9,we))),256))],512)),[[j,e(r).role_id]])])]),t("div",ge,[t("p",ke,a(u.$t("Должность")),1),C(t("select",{type:"text","onUpdate:modelValue":s[11]||(s[11]=p=>e(r).position_id=p),modelValue:e(r).position_name,class:"w-full dark:bg-gray-300 rounded-lg p-2.5 mt-2 border dark:border-none outline-semiCyan outline-1 text-black",required:""},[(o(!0),n(b,null,$((m=e(l))==null?void 0:m.get_position_list,p=>(o(),n("option",{value:p.id},a(p.name),9,he))),256))],8,ye),[[j,e(r).position_id]])])]}),_:1}),_(y,null,{default:f(()=>{var m,p,h,v;return[t("div",be,[e(i).user.role_en==="admin"?(o(),n("p",$e,a(u.$t("Компании")),1)):(o(),n("p",ve,a(u.$t("Компания")),1)),((m=e(i))==null?void 0:m.user.role_en)==="admin"?C((o(),n("select",{key:2,type:"text","onUpdate:modelValue":s[12]||(s[12]=x=>e(r).company_id=x),class:"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black"},[(o(!0),n(b,null,$((h=(p=e(d))==null?void 0:p.get_all_company)==null?void 0:h.results,x=>(o(),n("option",{class:"text-black",value:x.id},a(x.name),9,Ce))),256))],512)),[[j,e(r).company_id]]):e(i).user.role_en==="company_admin"?(o(),n("div",Ue,[t("p",Ve,a(e(i).user.company),1)])):k("",!0)]),e(i).user.role_en==="company_admin"?(o(),n("div",Le,[t("p",je,a(u.$t("Отдел")),1),C(t("select",{type:"text","onUpdate:modelValue":s[13]||(s[13]=x=>e(r).department_id=x),class:"w-full dark:bg-gray-300 rounded-lg p-2.5 border dark:border-none outline-semiCyan outline-1 text-black"},[(o(!0),n(b,null,$((v=e(d))==null?void 0:v.get_all_department.results,x=>(o(),n("option",{value:x.id},a(x.name),9,Ne))),256))],512),[[j,e(r).department_id]])])):k("",!0)]}),_:1}),_(y,null,{default:f(()=>[_(N,{class:"py-2 px-6 rounded-full",t:"button",type:"danger",onClick:s[14]||(s[14]=m=>c.showCreateUser=!1)},{default:f(()=>[L(a(u.$t("Отменить")),1)]),_:1}),_(N,{class:"py-2 px-6 rounded-full",t:"submit",type:"success"},{default:f(()=>[L(a(u.$t("Создать")),1)]),_:1})]),_:1})],32)]),_:1},8,["show-create-user"])):k("",!0)]))}},qe=Se,Me={class:"my-10"},Ie={class:"flex items-center gap-x-4 w-3/12 max-lg:w-full max-lg:x-mx-auto"},Te=["src"],Be={class:"tracking-widest font-bold max-xl:text-center"},De={class:"flex flex-col items-center justify-center w-5/12 max-lg:w-full mx-auto"},Ee={key:0,class:"text-lg font-bold tracking-widest mb-2"},Pe={key:1,class:"text-lg font-bold tracking-widest mb-2"},Fe={class:"text-center flex flex-col gap-y-2"},Ge={key:0,class:"tracking-widest text-sm text-gray-600"},Oe={class:"tracking-widest text-md"},We={class:"w-2/12 max-[1241px]:w-full max-lg:x-mx-auto text-center"},Ze={key:0,class:"tracking-widest font-bold"},ze=q({__name:"UserContentList",props:{userItem:{type:Object,required:!0}},setup(c){const i=M();return(d,l)=>{const r=H;return o(),n("div",Me,[_(r,{to:`/base/users/${c.userItem.id}`,class:"transition-all shadow-md hover:shadow-lg border dark:border-none dark:shadow-none dark:bg-gray-400 dark:hover:bg-gray-300 p-4 rounded-lg w-11/12 max-lg:w-full flex max-[1241px]:flex-col max-[1241px]:gap-y-4 justify-between items-center cursor-pointer"},{default:f(()=>[t("div",Ie,[t("img",{class:"w-14 h-14 rounded-full",src:e(i).get_server_domain+c.userItem.photo_url,alt:""},null,8,Te),t("h2",Be,a(c.userItem.first_name+" "+c.userItem.last_name),1)]),t("div",De,[e(i).user.role==="Администратор сайта"?(o(),n("p",Ee,a(d.$t("Роль | Должность")),1)):(o(),n("p",Pe,a(d.$t("Должность")),1)),t("div",Fe,[e(i).user.role==="Администратор сайта"?(o(),n("h2",Ge,"("+a(c.userItem.role)+")",1)):k("",!0),t("h2",Oe,a(c.userItem.position),1)])]),t("div",We,[e(i).user.role==="Администратор сайта"||e(i).user.role==="Администратор компании"?(o(),n("h2",Ze,a(d.$t("Дата регистрации")),1)):k("",!0)])]),_:1},8,["to"])])}}}),Ae={class:"max-lg:w-full border dark:border-0 dark:border-t-gray-500 dark:border-t p-4 rounded-xl shadow-md dark:shadow-gray-500"},Je={class:"text-center tracking-widest dark:text-white"},Re={class:"flex items-center justify-center my-4 gap-x-10"},He={class:"flex items-center gap-x-2"},Ke=t("div",null,[t("svg",{width:"35px",height:"35px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("g",{id:"User / Users_Group"},[t("path",{id:"Vector",class:"dark:stroke-white stroke-black",d:"M17 20C17 18.3431 14.7614 17 12 17C9.23858 17 7 18.3431 7 20M21 17.0004C21 15.7702 19.7659 14.7129 18 14.25M3 17.0004C3 15.7702 4.2341 14.7129 6 14.25M18 10.2361C18.6137 9.68679 19 8.8885 19 8C19 6.34315 17.6569 5 16 5C15.2316 5 14.5308 5.28885 14 5.76389M6 10.2361C5.38625 9.68679 5 8.8885 5 8C5 6.34315 6.34315 5 8 5C8.76835 5 9.46924 5.28885 10 5.76389M12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"})])])],-1),Qe={class:"tracking-widest"},Xe={class:"p-2 px-4 rounded-full border"},Ye=q({__name:"TheUserStats",setup(c){const i=I();return(d,l)=>(o(),n("div",Ae,[t("h2",Je,a(d.$t("Информация о пользователях")),1),t("div",Re,[t("div",He,[Ke,t("p",Qe,a(d.$t("Количество"))+":",1)]),t("div",Xe,[t("p",null,a(e(i).get_user_list.count),1)])])]))}}),et={class:"mb-10 mt-12 text-lg flex gap-x-10"},tt={key:0,class:"dark:text-white tracking-widest"},st={key:1,class:"dark:text-white tracking-widest"},lt={key:0,class:"flex gap-x-10"},ot={class:""},at={class:"w-full"},rt={class:"flex gap-x-10 max-lg:flex-wrap max-md:justify-center"},nt={class:"flex w-9/12 justify-between max-lg:justify-center gap-x-10 items-center max-md:flex-wrap max-md:mt-10 max-md:justify-center"},it={class:"flex max-lg:flex-wrap justify-center"},dt={class:"w-full"},ut={class:"w-3/12 max-lg:w-full"},mt={class:"flex flex-wrap justify-center gap-x-4"},ct=["onClick"],_t={__name:"UserContent",props:{userChecked:{type:String,default:"user-list"},showUserInfo:{type:Boolean,default:!1}},setup(c){const i=M(),d=I();D("");const l={page:1,limit:5,query:"",user_type:"user-list"};function r(w){w==="<"?Number(l.page)>1&&(l.page-=1):w===">"?Number(l.page)<d.user.number_of_pages&&(l.page=Number(l.page)+1):Number(w)<=d.user.number_of_pages&&(l.page=Number(w)),window.innerWidth>1e3?window.scrollTo({top:600}):window.innerWidth<1e3?window.scrollTo({top:895}):window.scrollTo()}return W(()=>{K({params:{page:l.page}})}),Z(()=>{i.user.role_en==="admin"?d.loadUserList({page:l.page,limit:l.limit,user_type:l.user_type,query:l.query}):d.loadUserList({page:l.page,limit:l.limit,user_type:"user-list/my-company",query:l.query})}),(w,u)=>{var p,h,v,x,T;const s=qe,m=ze;return o(),n("div",null,[t("div",{class:U({"flex flex-wrap items-center justify-between":e(i).user.role_en==="company_admin"})},[t("div",et,[e(i).user.role_en==="admin"?(o(),n("p",tt,a(w.$t("Список всех пользователей")),1)):(o(),n("p",st,a(w.$t("Список всех пользователей компании")),1))]),t("div",{class:U({"flex items-center justify-evenly my-10":e(i).user.role_en==="admin","w-2/12 max-lg:w-4/12 max-sm:w-full max-sm:mb-6 max-sm:mx-auto":e(i).user.role_en!=="admin"})},[((p=e(i))==null?void 0:p.user.role)==="Администратор сайта"?(o(),n("div",lt,[t("button",{class:U(["p-2 rounded-xl dark:text-white tracking-widest font-bold",{"bg-blueDarkSemiLight text-white":c.userChecked==="user-list"}]),onClick:u[0]||(u[0]=g=>{c.userChecked="user-list",e(d).loadUserList({page:e(d).page,limit:l.limit,user_type:c.userChecked})})},a(w.$t("Все пользователи")),3),t("button",{class:U(["p-2 rounded-xl dark:text-white tracking-widest font-bold",{"bg-blueDarkSemiLight text-white":c.userChecked==="admin-list"}]),onClick:u[1]||(u[1]=g=>{c.userChecked="admin-list",e(d).loadUserList({page:e(d).page,limit:l.limit,user_type:c.userChecked})})},a(w.$t("Администраторы компаний")),3)])):k("",!0),_(s)],2)],2),t("div",ot,[t("div",at,[t("div",rt,[t("div",nt,[_(X,{class:"w-full","model-value":l.query,"onUpdate:modelValue":u[2]||(u[2]=g=>l.query=g),onSearch:u[3]||(u[3]=g=>e(d).loadUserList(l))},null,8,["model-value"]),_(Q)])]),t("div",it,[t("div",dt,[((h=e(d))==null?void 0:h.get_user_list.count)>0?(o(!0),n(b,{key:0},$((v=e(d))==null?void 0:v.get_user_list.results,g=>(o(),S(m,{"user-item":g,class:"max-lg:w-full"},null,8,["user-item"]))),256)):k("",!0)]),t("div",ut,[_(Ye,{class:""})])])])]),t("div",mt,[e(d).get_user_list.count>5?(o(!0),n(b,{key:0},$((T=(x=e(d))==null?void 0:x.get_user_list)==null?void 0:T.links,(g,P)=>(o(),n("div",{key:P,class:U(["px-4 py-2 rounded-full cursor-pointer",{"bg-blue-400 text-white":g.active,"bg-gray-200 text-black":!g.active}]),onClick:xt=>{var B;r(g.label),(B=e(d))==null||B.loadUserList({page:l.page,limit:l.limit,user_type:e(i).user.role_en!=="admin"?"user-list/my-company":c.userChecked,query:l.query})}},a(g.label),11,ct))),128)):k("",!0)])])}}},pt=_t,ft={class:"dark:text-gray-300 tracking-widest text-sm"},qt=q({__name:"index",setup(c){return Y({title:"Пользователи",description:"Список пользователей данной платформы"}),(i,d)=>{const l=pt;return o(),n("div",null,[_(E,{"text-type":"pageTitle"},{default:f(()=>[L(a(i.$t("Страница с пользователями")),1)]),_:1}),t("p",ft,a(i.$t("Данная страница хранит информацию о пользователях данной платформы")),1),t("div",null,[_(l)])])}}});export{qt as default};
