import{w as i}from"./entry.8VLqy_2K.js";import{a as o,n as a,l as s}from"./index.aX4wazua.js";import{a as r}from"./swiper-vue.VD2cd0Tn.js";const u=i("document-store",{state:()=>({documentList:{},documentItem:{},userList:r({}),createChainForm:[],showDepartment:[],showUsersNode:[],chainSchedule:{},createForm:{title:"",description:"",file:"",src:"",receiver_id:""},draggableUser:null,showContext:null,showContextDepartment:null,showWarn:!1,showCreateDoc:!1,showRejectedWarn:!1}),getters:{get_all_document:e=>e.documentList},actions:{async docSign(e){await o.patch(`api/v1/document/sign/${e.id}`,{second_password:e.second_password},{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{s.success("Доступ разрешен",{autoClose:1e3,theme:"auto"})})},async loadAllDocument(e){await o.get(`api/v1/document/document-list${e.type?"/"+e.type:""}`,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{this.documentList=t.data})},async loadDocument(e){await o.get(`api/v1/document/${e.id}`,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{this.documentItem=t.data})},async docCreate(e){let t=new FormData;t.set("title",e.title),t.set("description",e.description),t.set("receiver_id",e.receiver_id),typeof e.file!="string"&&t.set("file",e.file),await o.post("api/v1/document/create",t,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(n=>{s.success("Документ создан",{autoClose:1e3,theme:"auto"}),this.loadAllDocument({page:1,limit:10}),this.showCreateDoc=!1})},async docUpdate(e){new FormData,await o.patch(`api/v1/document/update/${e.id}`,{title:e.title,description:e.description,users:e.users},{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{s.success("Успешный запуск",{autoClose:1e3,theme:"auto"})})},async docDelete(e){await o.delete(`api/v1/document/delete/${e.id}`,{headers:{Authorization:`Bearer ${a.localStorage.getData("token")}`}}).then(t=>{s.success("Успешно удалён",{theme:"auto",autoClose:1e3})})}}});export{u};
